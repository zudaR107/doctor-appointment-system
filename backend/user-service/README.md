# User Service

## Описание
Этот микросервис отвечает за управление пользователями в системе записи на приём к врачу.  
Он поддерживает CRUD-операции, фильтрацию по ролям, а также позволяет пользователям просматривать и обновлять свои данные.

## Запуск сервиса

1. Установите зависимости:
    ```bash
    npm install
    ```
2. Запустите сервер:
    ```bash
    npm run dev
    ```
   Сервер будет доступен по адресу:
   `http://localhost:5002`

## Swagger API
Документация API доступна после запуска сервиса:  
`http://localhost:5002/api-docs`

## Файлы микросервиса
### Структура проекта
```bash
user-service/
├── node_modules/       # Установленные зависимости
├── src/                # Исходный код сервиса
│   ├── config/         # Конфигурация (БД, Swagger)
│   │   ├── db.ts       # Подключение к PostgreSQL (TypeORM)
│   │   ├── swagger.ts  # Настройка Swagger-документации
│   ├── services/       # Основная бизнес-логика сервиса
│   │   ├── user.controller.ts  # Контроллер (обработка HTTP-запросов)
│   │   ├── user.entity.ts      # Модель пользователя (TypeORM)
│   │   ├── user.routes.ts      # Определение API-маршрутов
│   │   ├── user.service.ts     # Реализация управления пользователями
│   ├── middleware/       # Мидлвари (проверка аутентификации, ролей)
│   │   ├── auth.middleware.ts  # Проверка JWT-токена
│   │   ├── role.middleware.ts  # Проверка роли пользователя
│   ├── index.ts         # Точка входа сервера (Express.js)
├── .env                 # Переменные окружения
├── package.json         # Конфигурация npm-зависимостей
├── package-lock.json    # Список установленных зависимостей
├── tsconfig.json        # Конфигурация TypeScript
├── README.md            # Документация сервиса
```

### Описание файлов
- `src/index.ts` – точка входа сервиса, создаёт Express-сервер и подключает маршруты.
- `src/config/db.ts` – конфигурация подключения к PostgreSQL через TypeORM.
- `src/config/swagger.ts` – настройка Swagger-документации.
- `src/services/user.controller.ts` – контроллер обработки запросов (получение, обновление, удаление пользователей).
- `src/services/user.entity.ts` – модель пользователя (TypeORM).
- `src/services/user.routes.ts` – маршруты API (получение списка, обновление, удаление пользователей).
- `src/services/user.service.ts` – бизнес-логика сервиса (запросы к базе данных, валидация данных).
- `src/middleware/auth.middleware.ts` – проверка JWT-токена пользователя.
- `src/middleware/role.middleware.ts` – проверка ролей пользователя.
- `.env` – переменные окружения (не коммитится).
- `package.json` – список зависимостей и скрипты для запуска.
- `tsconfig.json` – конфигурация TypeScript.

